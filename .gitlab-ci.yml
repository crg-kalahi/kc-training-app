stages:
  - deploy

deploy_job:
  stage: deploy
  tags: 
    - deploy
  script:
    - "cd /opt/apps/train"
    - "git reset --hard"  
    - "git pull --force origin staging" 
    - "composer require inertiajs/inertia-laravel:^0.6.0"
    - "composer require pragmarx/google2fa-laravel"
    - "composer require bacon/bacon-qr-code"
    - "npm run dev" 
    - "php artisan migrate"
    - "php artisan optimize"
    - "php artisan config:clear"
  after_script:
    - echo "Cleaning up temporary files..." 
  only:
    - staging
    